# 2020/12

# 12/1

### linux

プロセスをバックグラウンドで起動 - &

```bash
# コマンドの末尾に &　をつける
$ sleep 10 &
```

バックグラウンドで起動してあるプロセスをフォアグラウンドに戻す - fg (foreground)

```bash
$ fg
# & デバックグラウンドで起動させていたものが実行される

ex)
$ sleep 50 &
# バックグラウンドで起動している
$ fg
# バックグラウンドに入れていた処理が実行されている間であれば
# fgコマンドでフォアグラウンドに戻すことができる(今回だと50秒間スリープさせている間)
```

コマンドのマニュアル表示 - man (manual)

```bash
$ man ps
# NAME
#      ps -- process status
# //
# 解説が表示される
```

# 12/6

### Container Orchestration(コンテナオーケストレーション)とは何?

- docker-compose などで複数のコンテナを管理することのメリットがあるか、ホストは一つしかない
- もし唯一のホストが故障してしまったら複数作成したコンテナも消滅してしまう
- ホストを大量生産して複数コンテナを複数ホストに振り分けようと考えたのがコンテナオーケストレーション

この技術を可能にしたのが Swarm や Kubernetes。

### Docker Swarm

#### Docker Swarm を Init する

```bash
$ docker swarm init
Swarm initialized: current node (k8hnkrgomcvk4azw8juql8onn) is now a manager.

To add a worker to this swarm, run the following command:

    docker swarm join --token SWMTKN-1-69otrkz1rhhdbliuj0ttr3baiu24arx5zemkwirmqwhnmcv89j-e1kt526xcdbaoh75iqsq2sorh 192.168.65.3:2377

To add a manager to this swarm, run 'docker swarm join-token manager' and follow the instructions.
```

#### サービスの作成

```
$ docker service create --name helloworld alpine:3.10 ping docker.com
```

#### Service をスケールイン

```bash
$ docker service scale helloworld=5
helloworld scaled to 5
overall progress: 5 out of 5 tasks
1/5: running   [==================================================>]
2/5: running   [==================================================>]
3/5: running   [==================================================>]
4/5: running   [==================================================>]
5/5: running   [==================================================>]
verify: Service converged
```

#### Service をスケールアウト

```bash
$ docker service scale helloworld=1
helloworld scaled to 1
overall progress: 1 out of 1 tasks
1/1: running   [==================================================>]
verify: Service converged
```

#### Service をローリングアップデート

```bash
$ docker service update --image alpine:3.11 helloworld
helloworld
overall progress: 1 out of 1 tasks
1/1: running
verify: Service converged
```

### Service の削除

```bash
$ docker service rm helloworld
```

# 12/10

## データベース論理設計の 1-13 で出てきた知らない単語

#### 関数従属性

- 〇〇が決まれば ×× と一つに決まる

  ex) 社員番号が決まれば誌名が決まる

#### 完全関数従属

- 部分関数従属しない状態のこと
  - 部分関数従属とは?:非キー属性が、候補キーを構成する属性の一部に関数従属していること

#### 推移的関数従属

- A が決まれば B も決まる、B も決まれば C も決まる状態の時、A が決まれば C が決まる

# 12/11

#### ハッシュ化とは?

- 元の値を「ハッシュ関数」と呼ばれる「値を中に放り込むと適当な値（適当に見える値）を返してくれる関数」に入れて「ハッシュ値」と呼ばれる「適当な値（適当に見える値）」に変換すること([参考 docs](https://wa3.i-3-i.info/word16973.html))

#### 暗号化とは?

- 特定のルールに従って、データをぐちゃぐちゃ(特別な処理をして別のデータに変換する)にすること([参考 docs](https://wa3.i-3-i.info/word1819.html))
  - https://cybersecurity-jp.com/security-measures/29197

# 12/14

## データベース論理設計の 14-29(ラストまで)

# 12/17

## データベース設計

### 論理設計

概念スキーマを定義すること

#### 流れ

1. データの洗い出し<br />
   (業務で使用する項目を全て洗い出す)
2. リレーション(テーブルごとに関係性を持たせること)
3. 正規化<br />
   (DB で保持するデータの冗長性を排除し、一貫性と効率性を保持するためのデータ形式にすること)
4. ER 図<br />
   (誰が見てもわかるようにテーブルをモデル化すること)

### 物理設計

論理設計したものを SQL サーバで実行し、パフォーマンスを見ていくなどを試して設計していく

## 流れ

1. データ要領
2. トランザクション、ログ、障害
3. インデックス
4. パフォーマンス

### 論理設計についてまとめていく

#### 考え方の手順

1.  トップダウン
    - 用件定義からデータを抽出(業務全体の流れを見ながら作るので業務にあったデータ構成を作れる)<br />
      ※ 漏れる可能性がある
      - 業務の中で発生するデータを集めどのようなデータが必要になってくるかを集める
        - ex)お客さんがどのような行動をして〇〇をするかを洗い出しそこから何が必要になってくるのか、
        - ex)レンタルショップだとお客さんの過去の履歴まで見れた方がいいのかなど
2.  ボトムアップ
    - 今ある業務のアウトプットを集める(画面や帳票などから集める)
      - 現時点で顧客管理を Excel などを使って管理している時にお客さんの名前、性別...などの項目など
3.  1, 2 をまとめる(背中方式)
    - 1, 2 をすり合わせることによって何が必要な必要でないかを洗い出す
4.  まとめたものを関係スキーマ(構造、枠組み)をまとめていく

# 12/18

- 属性
  - 列のこと
  - 項目のこと
- ドメイン
  - 定義域
  - とりうる値
  - Type(型)と考えて良い
- キー
  - 候補キー(テーブル内で一意に識別するためのキー)
  - 主キー(皇甫キーから絶対的に唯一になるキー)
  - 外部キー(他のテーブルでキーとなっている属性のこと)
    - 制約: 削除制約と追加制約にきおつけないといけない
      - 削除制約: 外部キーが使われている場合は主キー側のデータを削除できなくしたり、削除した時にはどのような処理をするのかの制約
      - 追加制約: 主キー側に存在しない値を外部キー側の表に登録できない制約

### 正規化

- データの不整合の発生を防ぐこと(「1 事実 1 個所」となるようにすること)
  - 不整合とは?: 例えば複数のテーブルで同じ名前のものを管理しており、その名前を変更する時に全てのテーブルの名前を変更しないといけないこと

#### 非正規系

- DBMS では扱えない状態

#### 第 1 正規系

- 繰り返しをなくす

#### 第 2 正規系

- 複合主キーの場合チェック
- 主キーの一部で定まるものがあるか?

#### 第 3 正規系

- 正規化の世界では基本的には第 3 正規形までしかしない

#### ボイスコッド正規形

- 正規形を開発したコッドさんの名前で命名

### 参考

https://qiita.com/kiyodori/items/5083ad8bbfc232d01827
